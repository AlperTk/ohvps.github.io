(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{500:function(i,e,l){"use strict";l.r(e);var a=l(62),v=Object(a.a)({},(function(){var i=this,e=i.$createElement,l=i._self._c||e;return l("ContentSlotsDistributor",{attrs:{"slot-key":i.$parent.slotKey}},[l("h1",{attrs:{id:"_10-olay-bildirim"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#_10-olay-bildirim"}},[i._v("#")]),i._v(" 10.\tOlay Bildirim ")]),i._v(" "),l("h2",{attrs:{id:"genel-bilgiler"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#genel-bilgiler"}},[i._v("#")]),i._v(" Genel Bilgiler")]),i._v(" "),l("p",[i._v("Olay Bildirim Abonelik API servisleri, HHS'lerin sunmuş oldukları olay bildirimlerini takip etmek amacıyla abonelik akışlarını tanımlar.")]),i._v(" "),l("p",[i._v("YÖS'ler olay bildirimlerini takip edebilmek için talep ettikleri abonelik hizmetlerini belirterek HHS'ler özelinde bir abonelik kaydı oluştururlar. Bu abonelik kaydını okuyabilir, güncelleyebilir ya da silebilirler.")]),i._v(" "),l("p",[i._v("Olay bildirimleri HHS'ler tarafından 2 yöntem ile sağlanır. İlki olay bildirimlerinin anlık olarak iletilmesi, diğeri ise anlık iletilemeyen olayların toplu olarak iletilmesidir.")]),i._v(" "),l("p",[i._v("Olay Bildirimi 2 API ile yönetilecektir.")]),i._v(" "),l("p",[i._v("1 - Olay Abonelik Servisleri (OAS)"),l("br"),i._v("\n2 - Olay Dinleme Servisleri  (ODS)")]),i._v(" "),l("p",[i._v("Olay Abonelik ve Olay Dinleme API'lerinin istek ve yanıt başlığında beklenen parametreler ÖBH,HBH,GKD API'lerinden farklıdır.\n"),l("RouterLink",{attrs:{to:"/v1.1.0/contents/temel-prensipler.html#_3-15-istek-baslıgı"}},[i._v("3.15. İstek Başlığı")]),i._v(" ve "),l("RouterLink",{attrs:{to:"/v1.1.0/contents/temel-prensipler.html#_3-15-3-16-_yanıt-baslıgı"}},[i._v("3.16. Yanıt Başlığı")]),i._v(" bölümlerinde zorunlu parametreler ve açıklamaları belirtilmiştir.")],1),i._v(" "),l("h2",{attrs:{id:"olay-abonelik-servisleri-oas"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#olay-abonelik-servisleri-oas"}},[i._v("#")]),i._v(" Olay Abonelik Servisleri (OAS)")]),i._v(" "),l("p",[i._v("Olay abonelik Servisleri; HHS'ler tarafından sunulacak olay bildirim abonelik servislerini ve iletilemeyen olaylar servisini içermektedir.")]),i._v(" "),l("p",[i._v("HHS'nin sunacağı bu API ile YÖS'ler şu adımları gerçekleştirebilir.")]),i._v(" "),l("ul",[l("li",[i._v("YÖS'ün olay bildirimlerini dinleyebilmek için öncelikle dinlemek istediği olaylara ait olay tipleri ve kaynak tiplerini belirlemesi gerekmektedir.")]),i._v(" "),l("li",[i._v('Olay tipleri ve kaynak tiplerinin neler olacağı "Olay Tipleri ve Kaynak Tipleri İlişkisi" tablosunda belirtilmiştir.')]),i._v(" "),l("li",[i._v("YÖS, belirlediği olaylar için HHS'ye olay abonelik endpointi aracılığı ile abonelik başlatır.")]),i._v(" "),l("li",[i._v("YÖS, abonelik numarası aracılığı ile abonelik bilgilerini görüntüleyebilir, güncelleyebilir, silebilir.")]),i._v(" "),l("li",[i._v("YÖS, olay bildirimlerini bu abonelik sayesinde kendisinin sunacağı Olay Dinleme API'si ile dinler.")]),i._v(" "),l("li",[i._v("HHS anlık iletemediği olaylarını biriktirerek, iletilemeyen olaylar endpointi ile YÖS'e sunar.")])]),i._v(" "),l("p",[i._v("HHS'ler \"Olay Tipleri ve Kaynak Tipleri İlişkisi\" tablosunda belirlenen olay ve kaynak tiplerinin tümü için YÖS'lere bildirim sunmak zorundadır.")]),i._v(" "),l("p",[i._v("Olay Abonelik Servislerinde Idempotency kurallarının işletilmesine gerek bulunmamaktadır.")]),i._v(" "),l("p",[i._v("YÖS'ler sahip oldukları rol özelinde olay abonelik servislerinden faydalanabilir. Bu yüzden olay bildirim etki alanı (scope) değerleri hesap_bilgisi ve/veya odeme_emri olarak belirlenmiştir.")]),i._v(" "),l("p",[i._v("Olay Abonelik Servisine ait API Endpointleri aşağıdaki tabloda listelenmiştir.")]),i._v(" "),l("h1",{attrs:{id:"olay-abonelik-servisleri-icin-erisim-adresleri-endpoints"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#olay-abonelik-servisleri-icin-erisim-adresleri-endpoints"}},[i._v("#")]),i._v(" Olay Abonelik Servisleri için Erişim Adresleri (Endpoints)")]),i._v(" "),l("p",[l("strong",[i._v('Etki Alanı (Scope) =“hesap_bilgisi”  "odeme_emri"')])]),i._v(" "),l("table",[l("thead",[l("tr",[l("th",[i._v("No")]),i._v(" "),l("th",[i._v("Kaynak")]),i._v(" "),l("th",[i._v("HTTP işlemi")]),i._v(" "),l("th",[i._v("Erişim Adresi")]),i._v(" "),l("th",[i._v("Zorunlu (Z)/ İsteğe Bağlı(İ)")]),i._v(" "),l("th",[i._v("Yetkilendirme Türü")]),i._v(" "),l("th",[i._v("İmzalama")]),i._v(" "),l("th",[i._v("Parametre")]),i._v(" "),l("th",[i._v("İstem Nesnesi")]),i._v(" "),l("th",[i._v("Yanıt Nesnesi")])])]),i._v(" "),l("tbody",[l("tr",[l("td",[i._v("1")]),i._v(" "),l("td",[i._v("olay-abonelik")]),i._v(" "),l("td",[i._v("POST")]),i._v(" "),l("td",[i._v("/olay-abonelik")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("İstemci Kimlik Bilgileri")]),i._v(" "),l("td",[i._v("İmzalı İstek ve Yanıt")]),i._v(" "),l("td"),i._v(" "),l("td",[i._v("OlayAbonelikİstegi")]),i._v(" "),l("td",[i._v("OlayAbonelik")])]),i._v(" "),l("tr",[l("td",[i._v("2")]),i._v(" "),l("td",[i._v("olay-abonelik")]),i._v(" "),l("td",[i._v("GET")]),i._v(" "),l("td",[i._v("/olay-abonelik")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("İstemci Kimlik Bilgileri")]),i._v(" "),l("td",[i._v("İmzalı Yanıt")]),i._v(" "),l("td"),i._v(" "),l("td",[i._v("-")]),i._v(" "),l("td",[i._v("OlayAbonelik")])]),i._v(" "),l("tr",[l("td",[i._v("3")]),i._v(" "),l("td",[i._v("olay-abonelik/{olayAbonelikNo}")]),i._v(" "),l("td",[i._v("PUT")]),i._v(" "),l("td",[i._v("/olay-abonelik/{olayAbonelikNo}")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("İstemci Kimlik Bilgileri")]),i._v(" "),l("td",[i._v("İmzalı İstek ve Yanıt")]),i._v(" "),l("td"),i._v(" "),l("td",[i._v("OlayAbonelikİstegi")]),i._v(" "),l("td",[i._v("OlayAbonelik")])]),i._v(" "),l("tr",[l("td",[i._v("4")]),i._v(" "),l("td",[i._v("olay-abonelik/{olayAbonelikNo}")]),i._v(" "),l("td",[i._v("DELETE")]),i._v(" "),l("td",[i._v("/olay-abonelik/{olayAbonelikNo}")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("İstemci Kimlik Bilgileri")]),i._v(" "),l("td",[i._v("-")]),i._v(" "),l("td",[i._v("-")]),i._v(" "),l("td",[i._v("-")]),i._v(" "),l("td",[i._v("-")])]),i._v(" "),l("tr",[l("td",[i._v("5")]),i._v(" "),l("td",[i._v("olay-abonelik/{olayAbonelikNo}/Iletilemeyen-olaylar")]),i._v(" "),l("td",[i._v("GET")]),i._v(" "),l("td",[i._v("/olay-abonelik/{olayAbonelikNo}/Iletilemeyen-olaylar")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("İstemci Kimlik Bilgileri")]),i._v(" "),l("td",[i._v("-")]),i._v(" "),l("td",[i._v("Sayfalama")]),i._v(" "),l("td"),i._v(" "),l("td",[i._v("Olaylar")])])])]),i._v(" "),l("h2",{attrs:{id:"adim-1-olay-aboneliginin-gerceklestirilmesi"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#adim-1-olay-aboneliginin-gerceklestirilmesi"}},[i._v("#")]),i._v(" ADIM 1: Olay Aboneliğinin gerçekleştirilmesi")]),i._v(" "),l("p",[i._v("POST /olay-abonelik\nHHS'nin olay abonelik hizmeti sunduğu servistir.\nYÖS, seçeceği olay-kaynak tipleri için bu servis aracılığı ile abone olabilir. HHS POST işlemi sonucunda, YÖS adına bir sürüm versiyonu özelinde olay abonelik kaynağı oluşturur ve tekil tanımlayıcı olan olayAbonelikNo değerini döner. olayAbonelikNo üretilirken farklı YÖS'ler için aynı değer kullanılamaz. olayAbonelikNo evrensel tekil olmalıdır."),l("br"),i._v("\n1 YÖS'ün 1 HHS'de 1 adet abonelik kaydı olabilir."),l("br"),i._v("\nBaşarılı POST isteği sonucu HTTP 200 cevabı ile iletilmelidir.")]),i._v(" "),l("p",[i._v('YÖS tarafından daha önce oluşturulmuş olay abonelik kaydı varsa "HTTP 409 - Kaynak Çakışması" hatasıyla uyarı mesajını döner.')]),i._v(" "),l("p",[i._v("Abonelik üzerinde görüntüleme, güncelleme, silme işlemlerini gerçekleştirebilir.\nYÖS'ün Aboneliği devam ettiği sürece; YÖS'ün açacağı Olay Dinleme API'sine, HHS tarafından abonelik kapsamında olay bildirimleri iletilir.")]),i._v(" "),l("p",[i._v("BKM'nin sunacağı abonelik servisleri için HHS ve YÖS'lerin abonelik isteği yapmasına gerek bulunmamaktadır. BKM üretim ortamı tanımları yapılırken katılımcıları abonelik servislerine üye yapacaktır. BKM'nin sunacağı abonelik servislerinin olay tipi \"HHS_YOS_GUNCELLENDI\"dir. HHS ve YÖS API ile sunulan bilgilerde bir değişiklik olduğunda yapılacak olay bildirimlerini sağlar.\nÖrneğin; HHS logo bilgilerinde yapılacak bir değişiklik sonrasında, YÖS'lere yapılacak bildirim ile logo bilgisini değişen HHS'nin hhsKod değerini iletir. YÖS, HHS API'yi  hhsKod ile çağırarak HHS'nin güncel bilgilerini alır. Güncel bilgiler ile kendi sistemini günceller.")]),i._v(" "),l("p",[l("strong",[i._v("OlayAbonelikIstegi nesnesi")])]),i._v(" "),l("table",[l("thead",[l("tr",[l("th",[i._v("Alan Adı")]),i._v(" "),l("th",[i._v("JSON Alan Adı")]),i._v(" "),l("th",[i._v("Format")]),i._v(" "),l("th",[i._v("Zorunlu / Koşullu /  İsteğe bağlı")]),i._v(" "),l("th",[i._v("Açıklama")]),i._v(" "),l("th",[i._v("HHS tarafından yapılması gereken kontrol ve işlemler")])])]),i._v(" "),l("tbody",[l("tr",[l("td",[i._v("Olay Abonelik")]),i._v(" "),l("td",[i._v("olayAbonelik")]),i._v(" "),l("td",[i._v("Kompleks:OlayAbonelik")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td"),i._v(" "),l("td")]),i._v(" "),l("tr",[l("td",[i._v(">Abonelik Tipleri")]),i._v(" "),l("td",[i._v("aboneliktipleri")]),i._v(" "),l("td",[i._v("Kompleks: abonelikTipleri[Array][1..N]")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td"),i._v(" "),l("td")]),i._v(" "),l("tr",[l("td",[i._v(">> Olay Tipi")]),i._v(" "),l("td",[i._v("olayTipi")]),i._v(" "),l("td",[i._v("AN1..36")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("YÖS abone olmak istediği olay tiplerini TR.OHVPS.DataCode.OlayTip sıralı veri tiplerinden değer ya da değerler ile doldurur.")]),i._v(" "),l("td",[i._v('"Olay Tipleri ve Kaynak Tipleri İlişkisi" tablosunda "Olay Bildirim Yapan" kolonu "HHS" olan olay tipleri ile veri girişine izin verilir.')])]),i._v(" "),l("tr",[l("td",[i._v(">> Kaynak Tipi")]),i._v(" "),l("td",[i._v("kaynakTipi")]),i._v(" "),l("td",[i._v("AN1..36 [Array][1..N]")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("Olay tiplerinin tanımlanabildiği kaynak listesi bulunmaktadır. Bu listeye uygun kaynak tipleri iletilmelidir.")]),i._v(" "),l("td",[i._v("HHS, YÖS API üzerinden YÖS'ün rollerini alarak uygun kaynak tiplerine kayıt olmasını sağlar.")])])])]),i._v(" "),l("p",[l("strong",[i._v("OlayAbonelik nesnesi")])]),i._v(" "),l("table",[l("thead",[l("tr",[l("th",[i._v("Alan Adı")]),i._v(" "),l("th",[i._v("JSON Alan Adı")]),i._v(" "),l("th",[i._v("Format")]),i._v(" "),l("th",[i._v("Zorunlu / Koşullu /  İsteğe bağlı")]),i._v(" "),l("th",[i._v("Açıklama")])])]),i._v(" "),l("tbody",[l("tr",[l("td",[i._v("Olay Abonelik")]),i._v(" "),l("td",[i._v("olayAbonelik")]),i._v(" "),l("td",[i._v("Kompleks:OlayAbonelik")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td")]),i._v(" "),l("tr",[l("td",[i._v(">Olay Abonelik Numarası")]),i._v(" "),l("td",[i._v("olayAbonelikNo")]),i._v(" "),l("td",[i._v("AN1..64")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("YÖS özelinde oluşturulan tekil tanımlayıcıdır. Farklı YÖS'ler için aynı değer kullanılamaz.")])]),i._v(" "),l("tr",[l("td",[i._v(">Olay Abonelik Oluşturulma zamanı")]),i._v(" "),l("td",[i._v("olusturmaZamani")]),i._v(" "),l("td",[i._v("ISODateTime")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("Olay Abonelik nesnesinin oluşturulma zaman damgası")])]),i._v(" "),l("tr",[l("td",[i._v(">Olay Abonelik Güncelleme zamanı")]),i._v(" "),l("td",[i._v("guncellemeZamani")]),i._v(" "),l("td",[i._v("ISODateTime")]),i._v(" "),l("td",[i._v("İ")]),i._v(" "),l("td",[i._v("Olay Abonelik nesnesinin oluşturulduğu zaman damgası iletilebilir.")])]),i._v(" "),l("tr",[l("td",[i._v(">Abonelik Tipleri")]),i._v(" "),l("td",[i._v("aboneliktipleri")]),i._v(" "),l("td",[i._v("Kompleks: abonelikTipleri[Array][1..N]")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("OlayAbonelikIstegi nesnesi içerisinde iletilen değerlerin yanıt içerisinde dönmesi beklenmektedir.")])]),i._v(" "),l("tr",[l("td",[i._v(">> Olay Tipi")]),i._v(" "),l("td",[i._v("olayTipi")]),i._v(" "),l("td",[i._v("AN1..36")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td")]),i._v(" "),l("tr",[l("td",[i._v(">> Kaynak Tipi")]),i._v(" "),l("td",[i._v("kaynakTipi")]),i._v(" "),l("td",[i._v("AN1..36 [Array][1..N]")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td")])])]),i._v(" "),l("p",[l("strong",[i._v("Olay Tipleri ve Kaynak Tipleri İlişkisi")])]),i._v(" "),l("table",[l("thead",[l("tr",[l("th",[i._v("Olay Tipleri")]),i._v(" "),l("th",[i._v("YÖS Rolü")]),i._v(" "),l("th",[i._v("Kaynak Tipleri")]),i._v(" "),l("th",[i._v("Olay Oluşturulma durumu")]),i._v(" "),l("th",[i._v("KaynakNo")]),i._v(" "),l("th",[i._v("Asıl verinin elde edileceği API")]),i._v(" "),l("th",[i._v("Olay Bildirimini Yapan")])])]),i._v(" "),l("tbody",[l("tr",[l("td",[i._v("KAYNAK_GUNCELLENDI")]),i._v(" "),l("td",[i._v("ÖBH")]),i._v(" "),l("td",[i._v("OdemeEmri")]),i._v(" "),l("td",[i._v("Tüm ödeme durum değişikliklerinde")]),i._v(" "),l("td",[i._v("odemeEmriNo")]),i._v(" "),l("td",[i._v("GET /odeme-emri/{odemeEmriNo}")]),i._v(" "),l("td",[i._v("HHS")])]),i._v(" "),l("tr",[l("td"),i._v(" "),l("td",[i._v("HBH")]),i._v(" "),l("td",[i._v("Bakiye")]),i._v(" "),l("td",[i._v("Bakiye değiştiğinde")]),i._v(" "),l("td",[i._v("hspRef")]),i._v(" "),l("td",[i._v("GET /hesaplar/{hspRef}/bakiye")]),i._v(" "),l("td",[i._v("HHS")])]),i._v(" "),l("tr",[l("td"),i._v(" "),l("td",[i._v("HBH")]),i._v(" "),l("td",[i._v("Hesap")]),i._v(" "),l("td",[i._v("Tüm durum değişikliklerinde")]),i._v(" "),l("td",[i._v("hspRef")]),i._v(" "),l("td",[i._v("/hesaplar/{hspRef}")]),i._v(" "),l("td",[i._v("HHS")])]),i._v(" "),l("tr",[l("td"),i._v(" "),l("td",[i._v("HBH")]),i._v(" "),l("td",[i._v("CokluIslemTalebi ( bulk-data)")]),i._v(" "),l("td",[i._v("İlgili API İlke ve kurallarına eklendiğinde güncellenecektir.")]),i._v(" "),l("td"),i._v(" "),l("td"),i._v(" "),l("td",[i._v("HHS")])]),i._v(" "),l("tr",[l("td"),i._v(" "),l("td",[i._v("HBH")]),i._v(" "),l("td",[i._v("HesapBilgisiRizasi")]),i._v(" "),l("td",[i._v("Rıza iptal detay kodu ‘02’ : Kullanıcı İsteği ile HHS üzerinden İptal durumunda")]),i._v(" "),l("td",[i._v("RizaNo")]),i._v(" "),l("td",[i._v("GET /hesap-bilgisi-rizasi/{RizaNo}")]),i._v(" "),l("td",[i._v("HHS")])]),i._v(" "),l("tr",[l("td",[i._v("AYRIK_GKD_TAMAMLANDI")]),i._v(" "),l("td",[i._v("ÖBH")]),i._v(" "),l("td",[i._v("ÖdemeEmriRizasi")]),i._v(" "),l("td",[i._v("İlgili API İlke ve kurallarına eklendiğinde güncellenecektir.")]),i._v(" "),l("td"),i._v(" "),l("td"),i._v(" "),l("td",[i._v("HHS")])]),i._v(" "),l("tr",[l("td"),i._v(" "),l("td",[i._v("HBH")]),i._v(" "),l("td",[i._v("HesapBilgisiRizasi")]),i._v(" "),l("td",[i._v("İlgili API İlke ve kurallarına eklendiğinde güncellenecektir.")]),i._v(" "),l("td"),i._v(" "),l("td"),i._v(" "),l("td",[i._v("HHS")])]),i._v(" "),l("tr",[l("td",[i._v("HHS_YOS_GUNCELLENDI")]),i._v(" "),l("td"),i._v(" "),l("td"),i._v(" "),l("td",[i._v("BKM sistemi tarafından üretilecek olayları dinlemek için kullanılacak kaynak tipidir. YÖS ve HHS'lerin BKM'ye abonelik oluşturmasına gerek bulunmamaktadır. BKM HHS ve YÖS üretim ortamı tanımı yaparken aboneliklerini başlatacaktır.  (HHS yaygınlaştırma durumundayken de aboneliği başlatılacaktır.)")]),i._v(" "),l("td"),i._v(" "),l("td"),i._v(" "),l("td",[i._v("HHS")])]),i._v(" "),l("tr",[l("td"),i._v(" "),l("td",[i._v("YÖS")]),i._v(" "),l("td",[i._v("HHS")]),i._v(" "),l("td",[i._v("HHS bilgilerinde değişiklik olduğunda, YÖS'ün hhsKod ile sorgulama yapması ve değişen bilgiyi güncellemesi beklenmektedir.")]),i._v(" "),l("td",[i._v("hhsKod")]),i._v(" "),l("td",[i._v("GET /hhs/{hhsKod}")]),i._v(" "),l("td",[i._v("BKM")])]),i._v(" "),l("tr",[l("td"),i._v(" "),l("td",[i._v("HHS")]),i._v(" "),l("td",[i._v("YOS")]),i._v(" "),l("td",[i._v("YÖS bilgilerinde değişiklik olduğunda, HHS'nin yosKod ile sorgulama yapması ve değişen bilgiyi güncellemesi beklenmektedir.")]),i._v(" "),l("td",[i._v("yosKod")]),i._v(" "),l("td",[i._v("GET /yos/{yosKod}")]),i._v(" "),l("td",[i._v("BKM")])])])]),i._v(" "),l("h2",{attrs:{id:"adim-2-olay-aboneliginin-guncellenmesi"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#adim-2-olay-aboneliginin-guncellenmesi"}},[i._v("#")]),i._v(" ADIM 2: Olay Aboneliğinin güncellenmesi")]),i._v(" "),l("p",[i._v("PUT\tolay-abonelik/{olayAbonelikNo}")]),i._v(" "),l("p",[i._v("YÖS'ün olay aboneliğine ait abonelik tiplerini güncelleyebildiği servistir. Olay aboneliği oluşturulduğu zaman HHS tarafından iletilen olayAbonelikNo aracılığı ile güncelleme işlemi yapılır. YÖS abone olmak istediği olay-kayıt tiplerininin son halini güncelleme servisi ile HHS'ye iletir. HHS bu bilgilerle eski abonelik tiplerinin yerini değiştirir.")]),i._v(" "),l("p",[i._v("Başarılı PUT isteği sonucu HTTP 200 cevabı ile iletilmelidir.")]),i._v(" "),l("p",[l("strong",[i._v("OlayAbonelikIstegi nesnesi")])]),i._v(" "),l("table",[l("thead",[l("tr",[l("th",[i._v("Alan Adı")]),i._v(" "),l("th",[i._v("JSON Alan Adı")]),i._v(" "),l("th",[i._v("Format")]),i._v(" "),l("th",[i._v("Zorunlu / Koşullu /  İsteğe bağlı")]),i._v(" "),l("th",[i._v("Açıklama")]),i._v(" "),l("th",[i._v("HHS tarafından yapılması gereken kontrol ve işlemler")])])]),i._v(" "),l("tbody",[l("tr",[l("td",[i._v("Olay Abonelik")]),i._v(" "),l("td",[i._v("olayAbonelik")]),i._v(" "),l("td",[i._v("Kompleks:OlayAbonelik")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td"),i._v(" "),l("td")]),i._v(" "),l("tr",[l("td",[i._v(">Olay Abonelik Numarası")]),i._v(" "),l("td",[i._v("olayAbonelikNo")]),i._v(" "),l("td",[i._v("AN1..64")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("YÖS özelinde oluşturulan tekil tanımlayıcıdır. Farklı YÖS'ler için aynı değer kullanılamaz.")]),i._v(" "),l("td",[i._v("HHS geçerli bir olay abonelik numarası olduğunun kontrolünü yapar.")])]),i._v(" "),l("tr",[l("td",[i._v(">Abonelik Tipleri")]),i._v(" "),l("td",[i._v("aboneliktipleri")]),i._v(" "),l("td",[i._v("Kompleks: abonelikTipleri[Array][1..N]")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td"),i._v(" "),l("td")]),i._v(" "),l("tr",[l("td",[i._v(">> Olay Tipi")]),i._v(" "),l("td",[i._v("olayTipi")]),i._v(" "),l("td",[i._v("AN1..36")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("YÖS abone olmak istediği olay tiplerini TR.OHVPS.DataCode.OlayTip sıralı veri tiplerinden değer ya da değerler ile doldurur.")]),i._v(" "),l("td",[i._v('"Olay Tipleri ve Kaynak Tipleri İlişkisi" tablosunda "Olay Bildirim Yapan" kolonu "HHS" olan olay tipleri ile veri girişine izin verilir.')])]),i._v(" "),l("tr",[l("td",[i._v(">> Kaynak Tipi")]),i._v(" "),l("td",[i._v("kaynakTipi")]),i._v(" "),l("td",[i._v("AN1..36 [Array][1..N]")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("Olay tiplerinin tanımlanabildiği kaynak listesi bulunmaktadır. Bu listeye uygun kaynak tipleri iletilmelidir.")]),i._v(" "),l("td",[i._v("HHS, YÖS API üzerinden YÖS'ün rollerini alarak uygun kaynak tiplerine kayıt olmasına izin verir.")])])])]),i._v(" "),l("p",[l("strong",[i._v("OlayAbonelik nesnesi")])]),i._v(" "),l("table",[l("thead",[l("tr",[l("th",[i._v("Alan Adı")]),i._v(" "),l("th",[i._v("JSON Alan Adı")]),i._v(" "),l("th",[i._v("Format")]),i._v(" "),l("th",[i._v("Zorunlu / Koşullu /  İsteğe bağlı")]),i._v(" "),l("th",[i._v("Açıklama")])])]),i._v(" "),l("tbody",[l("tr",[l("td",[i._v("Olay Abonelik")]),i._v(" "),l("td",[i._v("olayAbonelik")]),i._v(" "),l("td",[i._v("Kompleks:OlayAbonelik")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td")]),i._v(" "),l("tr",[l("td",[i._v(">Olay Abonelik Numarası")]),i._v(" "),l("td",[i._v("olayAbonelikNo")]),i._v(" "),l("td",[i._v("AN1..64")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("YÖS özelinde oluşturulan tekil tanımlayıcıdır. Farklı YÖS'ler için aynı değer kullanılamaz.")])]),i._v(" "),l("tr",[l("td",[i._v(">Olay Abonelik Oluşturulma zamanı")]),i._v(" "),l("td",[i._v("olusturmaZamani")]),i._v(" "),l("td",[i._v("ISODateTime")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("Olay Abonelik nesnesinin oluşturulma zaman damgası")])]),i._v(" "),l("tr",[l("td",[i._v(">Olay Abonelik Güncelleme zamanı")]),i._v(" "),l("td",[i._v("guncellemeZamani")]),i._v(" "),l("td",[i._v("ISODateTime")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("Olay Abonelik nesnesinin güncelleme zaman damgası")])]),i._v(" "),l("tr",[l("td",[i._v(">Abonelik Tipleri")]),i._v(" "),l("td",[i._v("aboneliktipleri")]),i._v(" "),l("td",[i._v("Kompleks: abonelikTipleri[Array][1..N]")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("YÖS üyelik güncellemesi yapmak istediği abonelik tiplerini iletir. "),l("br"),i._v(" Abonelik Tipleri nesnesi içerisinde yer alan değerler YÖS'ün güncel abonelikleri olarak HHS sistemine işlenmelidir. "),l("br"),i._v("OlayAbonelikIstegi nesnesi içerisinde iletilen değerlerin yanıt içerisinde dönmesi beklenmektedir.")])]),i._v(" "),l("tr",[l("td",[i._v(">> Olay Tipi")]),i._v(" "),l("td",[i._v("olayTipi")]),i._v(" "),l("td",[i._v("AN1..36")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("YÖS olay tiplerine abone olmak istediğinde olay tipi değerini TR.OHVPS.DataCode.OlayTip sıralı veri tiplerinden değer ya da değerler ile doldurur.")])]),i._v(" "),l("tr",[l("td",[i._v(">> Kaynak Tipi")]),i._v(" "),l("td",[i._v("kaynakTipi")]),i._v(" "),l("td",[i._v("AN1..36 [Array][1..N]")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("Abone olunmak istenen olay tipleri ile ilişkili kaynak tipleri belirlenerek ait olduğu TR.OHVPS.DataCode.KaynakTip sıralı veri tiplerinden değer ya da değerler ile doldurur.")])])])]),i._v(" "),l("h2",{attrs:{id:"adim-3-olay-aboneliginin-sorgulanması"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#adim-3-olay-aboneliginin-sorgulanması"}},[i._v("#")]),i._v(" ADIM 3: Olay Aboneliğinin sorgulanması")]),i._v(" "),l("p",[i._v("GET/olay-abonelik")]),i._v(" "),l("p",[i._v("YÖSolay abonelik bilgilerini sorgulamak isteyebilir. HHS, YÖS'e ait aktif durumdaki abonelik bilgisini iletir.\nBaşarılı GET sonucu HTTP 200 kodu ile iletilmelidir.")]),i._v(" "),l("p",[l("strong",[i._v("OlayAbonelik nesnesi")])]),i._v(" "),l("table",[l("thead",[l("tr",[l("th",[i._v("Alan Adı")]),i._v(" "),l("th",[i._v("JSON Alan Adı")]),i._v(" "),l("th",[i._v("Format")]),i._v(" "),l("th",[i._v("Zorunlu / Koşullu /  İsteğe bağlı")]),i._v(" "),l("th",[i._v("Açıklama")])])]),i._v(" "),l("tbody",[l("tr",[l("td",[i._v("Olay Abonelik")]),i._v(" "),l("td",[i._v("olayAbonelik")]),i._v(" "),l("td",[i._v("Kompleks:OlayAbonelik")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td")]),i._v(" "),l("tr",[l("td",[i._v(">Olay Abonelik Numarası")]),i._v(" "),l("td",[i._v("olayAbonelikNo")]),i._v(" "),l("td",[i._v("AN1..64")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("YÖS özelinde oluşturulan tekil tanımlayıcıdır. Farklı YÖS'ler için aynı değer kullanılamaz.")])]),i._v(" "),l("tr",[l("td",[i._v(">Olay Abonelik Oluşturulma zamanı")]),i._v(" "),l("td",[i._v("olusturmaZamani")]),i._v(" "),l("td",[i._v("ISODateTime")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("Olay Abonelik nesnesinin oluşturulma zaman damgası")])]),i._v(" "),l("tr",[l("td",[i._v(">Olay Abonelik Güncelleme zamanı")]),i._v(" "),l("td",[i._v("guncellemeZamani")]),i._v(" "),l("td",[i._v("ISODateTime")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("Olay Abonelik nesnesinin güncelleme zaman damgası")])]),i._v(" "),l("tr",[l("td",[i._v(">Abonelik Tipleri")]),i._v(" "),l("td",[i._v("aboneliktipleri")]),i._v(" "),l("td",[i._v("Kompleks: abonelikTipleri[Array][1..N]")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("YÖS üyelik güncellemesi yapmak istediği abonelik tiplerini iletir. "),l("br"),i._v(" Abonelik Tipleri nesnesi içerisinde yer alan değerler YÖS'ün güncel abonelikleri olarak HHS sistemine işlenmelidir.")])]),i._v(" "),l("tr",[l("td",[i._v(">> Olay Tipi")]),i._v(" "),l("td",[i._v("olayTipi")]),i._v(" "),l("td",[i._v("AN1..36")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("YÖS olay tiplerine abone olmak istediğinde olay tipi değerini TR.OHVPS.DataCode.OlayTip sıralı veri tiplerinden değer ya da değerler ile doldurur.")])]),i._v(" "),l("tr",[l("td",[i._v(">> Kaynak Tipi")]),i._v(" "),l("td",[i._v("kaynakTipi")]),i._v(" "),l("td",[i._v("AN1..36 [Array][1..N]")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("Abone olunmak istenen olay tipleri ile ilişkili kaynak tipleri belirlenerek ait olduğu TR.OHVPS.DataCode.KaynakTip sıralı veri tiplerinden değer ya da değerler ile doldurur.")])])])]),i._v(" "),l("h2",{attrs:{id:"adim-4-olay-aboneliginin-iptali"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#adim-4-olay-aboneliginin-iptali"}},[i._v("#")]),i._v(" ADIM 4: Olay Aboneliğinin iptali")]),i._v(" "),l("p",[i._v("DELETE/olay-abonelik/olayAbonelikNo")]),i._v(" "),l("p",[i._v("YÖS'ün abonelik kaydını silmesi için HHS'nin sunduğu servistir.  Başarılı silme işlemi sonucu HTTP 204 ile YÖS'e iletilir.")]),i._v(" "),l("h2",{attrs:{id:"adim-5-olay-aboneliginin-iletilemeyen-olayları"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#adim-5-olay-aboneliginin-iletilemeyen-olayları"}},[i._v("#")]),i._v(" ADIM 5: Olay Aboneliğinin İletilemeyen Olayları")]),i._v(" "),l("p",[i._v("GET /iletilemeyen-olaylar")]),i._v(" "),l("p",[i._v("HHS kaynaklar üzerinde oluşacak olayları YÖS'e POST/olay-bildirim servisi ile gönderim sağlayacak. Bu gönderim belli bir yeniden gönderim politası (retry-policy) ile yapılacaktır.  Ancak yine de iletilemeyen olaylar olursa (YÖS servisinden HTTP 202 alamama durumu) YÖS'e bu servis üzerinden sunulacaktır. Yani yeniden gönderim politikası sonunda gönderilemeyen olaylar bu servis ile sunulmalıdır.")]),i._v(" "),l("p",[i._v("Bu serviste 1 gün öncesinden sorgu anına kadar tüm kayıtlarına ait iletilemeyen olaylar listelenecektir.\nÖrnek sorgu zamanı : 2023-04-06T15:14:00+03:00\nHHS'nin sunacağı veri 2023-04-05T00:00:00+03:00  ile 2023-04-06T15:14:00+03:00 arasında olmalıdır.\nSıralama yönü olay tarihine göre artan şekilde olmalıdır. Sayfalama 100'er kayıt dönülerek yapılmalıdır.")]),i._v(" "),l("p",[i._v("İşlem Sorgu Örneği GET /iletilemeyen-olaylar?syfNo=1")]),i._v(" "),l("p",[l("strong",[i._v("İletilemeyen Olaylar Sorgulama İsteği Sorgu Parametreleri")])]),i._v(" "),l("table",[l("thead",[l("tr",[l("th",[i._v("Alan Adı")]),i._v(" "),l("th",[i._v("Parametre Adı")]),i._v(" "),l("th",[i._v("Format")]),i._v(" "),l("th",[i._v("Zorunlu / Koşullu /  İsteğe bağlı")]),i._v(" "),l("th",[i._v("Açıklama")]),i._v(" "),l("th",[i._v("HHS tarafından yapılması gereken kontrol ve işlemler")])])]),i._v(" "),l("tbody",[l("tr",[l("td",[i._v("İstenen Sayfa Numarasi")]),i._v(" "),l("td",[i._v("syfNo")]),i._v(" "),l("td",[i._v("N3")]),i._v(" "),l("td",[i._v("İ")]),i._v(" "),l("td",[i._v("Cevapta dönecek sayfa numarası 1’den başlayarak artan değerlerle iletilmelidir.")]),i._v(" "),l("td",[i._v("Bu veri gönderildiği durumda, HHS İletilemeyen Olaylar listesine ait bu sayfadaki kayıtları gönderir. Gönderilmediğinde, HHS ilk sayfadaki kayıtları gönderir.")])])])]),i._v(" "),l("p",[l("strong",[i._v("Tablo 17: Olaylar nesnesi")])]),i._v(" "),l("table",[l("thead",[l("tr",[l("th",[i._v("Alan Adı")]),i._v(" "),l("th",[i._v("JSON Alan Adı")]),i._v(" "),l("th",[i._v("Format")]),i._v(" "),l("th",[i._v("Zorunlu / Koşullu /  İsteğe bağlı")]),i._v(" "),l("th",[i._v("Açıklama")])])]),i._v(" "),l("tbody",[l("tr",[l("td",[i._v("Olaylar")]),i._v(" "),l("td",[i._v("olaylar")]),i._v(" "),l("td",[i._v("Kompleks: Olaylar")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td")]),i._v(" "),l("tr",[l("td",[i._v(">olayNo")]),i._v(" "),l("td"),i._v(" "),l("td",[i._v("AN1..64")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("Olaya ait evrensel tekil numaradır.")])]),i._v(" "),l("tr",[l("td",[i._v(">olayTarihi")]),i._v(" "),l("td"),i._v(" "),l("td",[i._v("ISODateTime")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("Olayın oluştuğu tarih bilgisidir.")])]),i._v(" "),l("tr",[l("td",[i._v(">olayTip")]),i._v(" "),l("td"),i._v(" "),l("td",[i._v("AN1..128")]),i._v(" "),l("td",[i._v(">")]),i._v(" "),l("td",[i._v("TR.OHVPS.DataCode.OlayTip sıralı veri tiplerinden birini alır.")])]),i._v(" "),l("tr",[l("td",[i._v(">kaynakTip")]),i._v(" "),l("td"),i._v(" "),l("td",[i._v("AN1..128")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("TR.OHVPS.DataCode.KaynakTip sıralı veri tiplerinden birini alır.")])]),i._v(" "),l("tr",[l("td",[i._v(">kaynakNo")]),i._v(" "),l("td"),i._v(" "),l("td",[i._v("AN1..128")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("Güncellenen kaynağa ait HHS sistemindeki tekil tanımlayıcı.")])])])]),i._v(" "),l("p",[i._v("Kaynak numarasında gönderilen değer ile ilgili kaynağı sorgulayarak almak YÖS'ün insiyatifindedir.")]),i._v(" "),l("h2",{attrs:{id:"olay-dinleme-servisleri-ods"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#olay-dinleme-servisleri-ods"}},[i._v("#")]),i._v(" Olay Dinleme Servisleri (ODS)")]),i._v(" "),l("p",[i._v("Olay Dinleme Servislerinde Idempotency kurallarının işletilmesine gerek bulunmamaktadır.")]),i._v(" "),l("p",[i._v("Olay Dinleme Servisine ait API Endpointleri aşağıdaki tabloda listelenmiştir.")]),i._v(" "),l("h1",{attrs:{id:"olay-dinleme-servisleri-icin-erisim-adresleri-endpoints"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#olay-dinleme-servisleri-icin-erisim-adresleri-endpoints"}},[i._v("#")]),i._v(" Olay Dinleme Servisleri için Erişim Adresleri (Endpoints)")]),i._v(" "),l("p",[l("strong",[i._v("Etki Alanı (Scope) =“olay_dinleme”")])]),i._v(" "),l("table",[l("thead",[l("tr",[l("th",[i._v("No")]),i._v(" "),l("th",[i._v("Kaynak")]),i._v(" "),l("th",[i._v("HTTP işlemi")]),i._v(" "),l("th",[i._v("Erişim Adresi")]),i._v(" "),l("th",[i._v("Zorunlu (Z)/ İsteğe Bağlı(İ)")]),i._v(" "),l("th",[i._v("Yetkilendirme Türü")]),i._v(" "),l("th",[i._v("İmzalama")]),i._v(" "),l("th",[i._v("Parametre")]),i._v(" "),l("th",[i._v("İstem Nesnesi")]),i._v(" "),l("th",[i._v("Yanıt Nesnesi")])])]),i._v(" "),l("tbody",[l("tr",[l("td",[i._v("1")]),i._v(" "),l("td",[i._v("olay-dinleme")]),i._v(" "),l("td",[i._v("POST")]),i._v(" "),l("td",[i._v("/olay-dinleme")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("İstemci Kimlik Bilgileri")]),i._v(" "),l("td",[i._v("İmzalı İstek")]),i._v(" "),l("td"),i._v(" "),l("td"),i._v(" "),l("td",[i._v("Olaylar")])])])]),i._v(" "),l("h2",{attrs:{id:"adim-1-olay-dinleme"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#adim-1-olay-dinleme"}},[i._v("#")]),i._v(" ADIM 1: Olay Dinleme")]),i._v(" "),l("p",[i._v("POST/olay-dinleme")]),i._v(" "),l("p",[i._v("Olay abonelik servisi ile abone olunan olaylar, olay dinleme servisi ile YÖS'e iletilir.\nYanıt nesnesi içerisinde en fazla 100 kayıt dönülmelidir.\nBaşarılı POST isteği sonucu HTTP 202 Accepted ile dönülmelidir.")]),i._v(" "),l("p",[i._v("HHS'nin işlem hata aldığında, başarılı işlem olana kadar 20 kez deneme yapılması gerekmektedir.\nİlk istekle son istek arasında 2 saat olacak şekilde, zamana yayarak bu denemelerin yapılması gerekmektedir. (Exponential backoff policy uygulanması beklenmektedir. )\nHHS kendi sistemini yormayacak şekilde, belirleyeceği kurallar dahilinde bu geliştirmeyi yapmalıdır.")]),i._v(" "),l("p",[l("strong",[i._v("Tablo 17: Olaylar nesnesi")])]),i._v(" "),l("table",[l("thead",[l("tr",[l("th",[i._v("Alan Adı")]),i._v(" "),l("th",[i._v("JSON Alan Adı")]),i._v(" "),l("th",[i._v("Format")]),i._v(" "),l("th",[i._v("Zorunlu / Koşullu /  İsteğe bağlı")]),i._v(" "),l("th",[i._v("Açıklama")])])]),i._v(" "),l("tbody",[l("tr",[l("td",[i._v("Olaylar")]),i._v(" "),l("td",[i._v("olaylar")]),i._v(" "),l("td",[i._v("Kompleks: Olaylar")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td")]),i._v(" "),l("tr",[l("td",[i._v(">olayNo")]),i._v(" "),l("td"),i._v(" "),l("td",[i._v("AN1..64")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td")]),i._v(" "),l("tr",[l("td",[i._v(">olayTarihi")]),i._v(" "),l("td"),i._v(" "),l("td",[i._v("ISODateTime")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td")]),i._v(" "),l("tr",[l("td",[i._v(">olayTip")]),i._v(" "),l("td"),i._v(" "),l("td",[i._v("AN1..128")]),i._v(" "),l("td",[i._v(">")]),i._v(" "),l("td",[i._v("TR.OHVPS.DataCode.OlayTip sıralı veri tiplerinden birini alır.")])]),i._v(" "),l("tr",[l("td",[i._v(">kaynakTip")]),i._v(" "),l("td"),i._v(" "),l("td",[i._v("AN1..128")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("TR.OHVPS.DataCode.KaynakTip sıralı veri tiplerinden birini alır.")])]),i._v(" "),l("tr",[l("td",[i._v(">kaynakNo")]),i._v(" "),l("td"),i._v(" "),l("td",[i._v("AN1..128")]),i._v(" "),l("td",[i._v("Z")]),i._v(" "),l("td",[i._v("Güncellenen kaynağa ait HHS sistemindeki tekil tanımlayıcı.")])])])])])}),[],!1,null,null,null);e.default=v.exports}}]);