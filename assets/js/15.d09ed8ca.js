(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{417:function(e,i,l){"use strict";l.r(i);var r=l(52),n=Object(r.a)({},(function(){var e=this,i=e.$createElement,l=e._self._c||i;return l("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[l("p",[l("strong",[e._v("POST /erisim-belirteci")])]),e._v(" "),l("p",[l("strong",[e._v("İSTEK:")])]),e._v(" "),l("p",[e._v("YÖS erisim-belirteci erişim adresini 2 amaçla kullanır:")]),e._v(" "),l("ol",[l("li",[l("p",[e._v("Bir önceki adımdan aldığı rizaNo, rizaTip (ödeme emri başlatma hizmetinde “O”, hesap bilgisi hizmetinde “H”) ve GKD sonrası dönülen yetKod bilgilerini kullanarak HHS nezdinde ErisimBelirteci nesnesi oluşturmak üzere istekte bulunur. YÖS’ün istekte bulunabilmesi için GKD adımının başarılı bir şekilde tamamlanması rizaDrm bilgisinin ‘yetkilendirildi’ olması gerekir. Erişim Belirteci nesnesi ile rızası nesnesi (Ödeme Emri Rızası veya Hesap Bilgisi Rızası) arasındaki ilişki rıza numarası üzerinden sağlanır.")])]),e._v(" "),l("li",[l("p",[e._v("Aldığı erişim belirtecinin Geçerlilik Süresinin dolduğu durumda, yenileme belirteci karşılığında yeni bir erişim belirteci alması gerekmektedir.")])])]),e._v(" "),l("p",[e._v("POST /erisim-belirteci isteğinin (REQUEST) gövdesinde (BODY)  “ErisimBelirteciIstegi” nesnesi (Tablo-18) kullanılır. İstek başarıyla sonuçlanırsa HHS kaynak sunucusunda “ErisimBelirteci” nesnesi (Tablo 19) oluşturulur veya (Yenileme Belirteci için) güncellenir. Rıza durumu “Yetki Kullanıldı” olarak güncellenir.")]),e._v(" "),l("p",[l("strong",[e._v("Tablo 20: “ErisimBelirteciIstegi” nesnesi")])]),e._v(" "),l("table",[l("thead",[l("tr",[l("th",[e._v("Alan Adı")]),e._v(" "),l("th",[e._v("JSON Alan Adı")]),e._v(" "),l("th",[e._v("Format:Veri modeli İsmi")]),e._v(" "),l("th",[e._v("Zorunlu / Koşullu /  İsteğe bağlı")]),e._v(" "),l("th",[e._v("Açıklama")])])]),e._v(" "),l("tbody",[l("tr",[l("td",[e._v("RızaNo")]),e._v(" "),l("td",[e._v("rizaNo")]),e._v(" "),l("td",[e._v("AN1..128")]),e._v(" "),l("td",[e._v("Z")]),e._v(" "),l("td",[e._v("Rıza nesnesinin oluşturulması esnasında HHS kaynak sunucusu tarafından atanan biricik tanımlayıcı")])]),e._v(" "),l("tr",[l("td",[e._v("Rıza Tipi")]),e._v(" "),l("td",[e._v("rizaTip")]),e._v(" "),l("td",[e._v("AN1")]),e._v(" "),l("td",[e._v("Z")]),e._v(" "),l("td",[l("strong",[e._v("O veya H (TR.OHVPS.DataCode.RizaTip)")])])]),e._v(" "),l("tr",[l("td",[e._v("Yetki Tipi")]),e._v(" "),l("td",[e._v("yetTip")]),e._v(" "),l("td",[e._v("AN1..50")]),e._v(" "),l("td",[e._v("Z")]),e._v(" "),l("td",[e._v("“yet_kod” yada “yenileme_belirteci” değerini alabilir. "),l("strong",[e._v("(TR.OHVPS.DataCode.YetTip)")])])]),e._v(" "),l("tr",[l("td",[e._v("Yetki Kodu")]),e._v(" "),l("td",[e._v("yetKod")]),e._v(" "),l("td",[e._v("AN1..255")]),e._v(" "),l("td",[e._v("K")]),e._v(" "),l("td",[e._v("GKD işleminden dönen yetkilendirme kodudur. Tek kullanımlık olup, aynı yetKod ile birden fazla token alınamaz. yetKod Parametresinin yaşam ömrü 5 dakika olmalıdır."),l("br"),e._v("yetTip = “yet_kod” ise zorunludur.")])]),e._v(" "),l("tr",[l("td",[e._v("Yenilenme Belirteci")]),e._v(" "),l("td",[e._v("yenilemeBelirteci")]),e._v(" "),l("td",[e._v("AN1..4096")]),e._v(" "),l("td",[e._v("K")]),e._v(" "),l("td",[e._v("Erişim belirtecinin yenilenmesi amacıyla kullanılır."),l("br"),e._v("yetTip = “yenileme_belirteci” ise kullanımı zorunludur.")])])])]),e._v(" "),l("p",[l("strong",[e._v("BAŞARILI YANIT:")])]),e._v(" "),l("p",[e._v("POST işleminin RESPONSE gövdesini (BODY) oluşturan “erisimBelirteci” nesnesinde (Tablo-19) bulunan erişim belirteci değeri ödeme emrinin başlatılması esnasında kullanılır.")]),e._v(" "),l("p",[l("strong",[e._v('Tablo 21: "ErisimBelirteci" nesnesi')])]),e._v(" "),l("table",[l("thead",[l("tr",[l("th",[e._v("Alan Adı")]),e._v(" "),l("th",[e._v("JSON Alan Adı")]),e._v(" "),l("th",[e._v("Format:Veri modeli İsmi")]),e._v(" "),l("th",[e._v("Zorunlu / Koşullu /  İsteğe bağlı")]),e._v(" "),l("th",[e._v("Açıklama")])])]),e._v(" "),l("tbody",[l("tr",[l("td",[e._v("Erişim Belirteci")]),e._v(" "),l("td",[e._v("erisimBelirteci")]),e._v(" "),l("td",[e._v("AN1..4096")]),e._v(" "),l("td",[e._v("Z")]),e._v(" "),l("td",[e._v("Yetkilendirme Kodu karşılığında HHS tarafından dönülen ve sonraki hesap bilgisi ve ödeme emri servislerine erişimde kullanılan bilgidir.")])]),e._v(" "),l("tr",[l("td",[e._v("Geçerlilik Süresi")]),e._v(" "),l("td",[e._v("gecerlilikSuresi")]),e._v(" "),l("td",[e._v("N1..9")]),e._v(" "),l("td",[e._v("Z")]),e._v(" "),l("td",[e._v("Erişim Belirtecini saniye cinsinden geçerlilik süresidir."),l("br"),e._v(" Erişim belirteci geçerli olduğu son tarih ;"),l("br"),e._v("Hesap Bilgisi Rızası için 30 gün olmalıdır. Erişimin Geçerli Olduğu Son Tarih 30’dan küçük ise bu süre değeri ile sınırlıdır."),l("br"),e._v("Ödeme Başlatma Rızası için 5 dakika olmalıdır.")])]),e._v(" "),l("tr",[l("td",[e._v("Yenileme Belirteci")]),e._v(" "),l("td",[e._v("yenilemeBelirteci")]),e._v(" "),l("td",[e._v("AN1..4096")]),e._v(" "),l("td",[e._v("Z")]),e._v(" "),l("td",[e._v("Erişim belirtecinin yenilenmesi amacıyla kullanılır.")])]),e._v(" "),l("tr",[l("td",[e._v("Yenileme Belirteci Geçerlik Süresi")]),e._v(" "),l("td",[e._v("yenilemeBelirteciGecerlilikSuresi")]),e._v(" "),l("td",[e._v("N1..9")]),e._v(" "),l("td",[e._v("Z")]),e._v(" "),l("td",[e._v("Yenileme belirtecinin saniye cinsinden geçerlilik süresidir."),l("br"),e._v("Yenileme belirtecinin geçerli olduğu son tarih ;"),l("br"),e._v("Hesap Bilgisi Rızası için  Erişimin Geçerli Olduğu Son Tarih ile sınırlı olmalıdır."),l("br"),e._v("Bu tarih geldiği zaman Hesap Bilgisi Rıza Durumunu ”Yetki Sonlandırıldı” statüsüne çekilmesi gerekir."),l("br"),e._v("Ödeme Başlatma Rızası için Rıza Oluşturma Zamanından 15 gün sonrası olmalıdır."),l("br"),l("br"),e._v("15 gün süresi sorgulama servislerinin çağrımını destekleyecek şekilde uzun tutulmuştur. İleri vadeli işlemler bu kapsamda değildir. "),l("br"),e._v("Ödeme emri 5 dakika içinde gerçekleştirilmelidir. Gerçekleşmediğinde 4.2.9 bölümünde aktarılan rıza statü güncellemesi yapılmalıdır.")])])])]),e._v(" "),l("p",[e._v("erisim-belirteci erisim noktasından alınan elde edilen erisimBelirteci ilişkilendiriliği nesne veya işlem için gönderilen POST isteği başlığında x-access-token alanında iletilir.\nYenilenme Belirteci (refreshToken) kullanılarak Erişim Belirteci (accessToken) alındığında, dönen yanıttaki Yenileme Belirteci ve Yenileme Belirteci Geçerlik Süresi değişmez.")]),e._v(" "),l("p",[e._v("Yenileme belirteci karşılığı erişim belirteci alınması sırasında rıza durumları aşağıdaki şekilde kontrol edilmelidir:")]),e._v(" "),l("ul",[l("li",[e._v("Hesap bilgisi akışında sadece Yetki Kullanıldı - K , ödeme emri için Yetki Kullanıldı – K veya Yetki ödeme emrine dönüştü – E rıza durumlarında yenileme belirteci karşılığı erişim belirteci alınabilir.")]),e._v(" "),l("li",[e._v("Rıza durumu Yetki İptal - I statüsünde ya da Yetki Sonlandırıldı - S ise ise "),l("strong",[e._v("TR.OBHS.Resource.ConsentRevoked")]),e._v(" hatası dönülmelidir.")]),e._v(" "),l("li",[e._v("Rıza durumu Yetki Bekleniyor - B ya da Yetkilendirildi - Y  ise "),l("strong",[e._v("TR.OBHS.Resource.ConsentMismatch")]),e._v(" hatası dönülmelidir.")])])])}),[],!1,null,null,null);i.default=n.exports}}]);